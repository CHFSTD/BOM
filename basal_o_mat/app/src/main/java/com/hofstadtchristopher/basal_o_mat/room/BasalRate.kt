package com.hofstadtchristopher.basal_o_mat.room

import androidx.room.ColumnInfo
import androidx.room.Entity
import androidx.room.Ignore
import androidx.room.PrimaryKey

/**
 *  Basalrate Data Class and room entity which contains the insulin dose of each hour,
 *  optiopnal notes and a function which returns the dailydose of this basalrate.
 *  Requires a name, id (primary key in room database) is autogenerated
 */
@Entity(tableName = "BasalRates")
data class BasalRate(
    @ColumnInfo(name = "00")
    var rate00: Float = 0F,

    @ColumnInfo(name = "01")
    var rate01: Float = 0F,

    @ColumnInfo(name = "02")
    var rate02: Float = 0F,

    @ColumnInfo(name = "03")
    var rate03: Float = 0F,

    @ColumnInfo(name = "04")
    var rate04: Float = 0F,

    @ColumnInfo(name = "05")
    var rate05: Float = 0F,

    @ColumnInfo(name = "06")
    var rate06: Float = 0F,

    @ColumnInfo(name = "07")
    var rate07: Float = 0F,

    @ColumnInfo(name = "08")
    var rate08: Float = 0F,

    @ColumnInfo(name = "09")
    var rate09: Float = 0F,

    @ColumnInfo(name = "10")
    var rate10: Float = 0F,

    @ColumnInfo(name = "11")
    var rate11: Float = 0F,

    @ColumnInfo(name = "12")
    var rate12: Float = 0F,

    @ColumnInfo(name = "13")
    var rate13: Float = 0F,

    @ColumnInfo(name = "14")
    var rate14: Float = 0F,

    @ColumnInfo(name = "15")
    var rate15: Float = 0F,

    @ColumnInfo(name = "16")
    var rate16: Float = 0F,

    @ColumnInfo(name = "17")
    var rate17: Float = 0F,

    @ColumnInfo(name = "18")
    var rate18: Float = 0F,

    @ColumnInfo(name = "19")
    var rate19: Float = 0F,

    @ColumnInfo(name = "20")
    var rate20: Float = 0F,

    @ColumnInfo(name = "21")
    var rate21: Float = 0F,

    @ColumnInfo(name = "22")
    var rate22: Float = 0F,

    @ColumnInfo(name = "23")
    var rate23: Float = 0F,

    @ColumnInfo(name = "Name")
    val name: String,

    @ColumnInfo(name = "Note")
    var note: String = ""
    ) {

    @PrimaryKey(autoGenerate = true)
    @ColumnInfo(name = "ID")
    var id: Int = 0

    fun setRate(time: Int, value: Float) {
        when(time) {
            0 ->    rate00 = value
            1 ->    rate01 = value
            2 ->    rate02 = value
            3 ->    rate03 = value
            4 ->    rate04 = value
            5 ->    rate05 = value
            6 ->    rate06 = value
            7 ->    rate07 = value
            8 ->    rate08 = value
            9 ->    rate09 = value
            10 ->   rate10 = value
            11 ->   rate11 = value
            12 ->   rate12 = value
            13 ->   rate13 = value
            14 ->   rate14 = value
            15 ->   rate15 = value
            16 ->   rate16 = value
            17 ->   rate17 = value
            18 ->   rate18 = value
            19 ->   rate19 = value
            20 ->   rate20 = value
            21 ->   rate21 = value
            22 ->   rate22 = value
            23 ->   rate23 = value
        }
    }

    fun dayRate(): Float {
        return (rate00
                + rate01
                + rate02
                + rate03
                + rate04
                + rate05
                + rate06
                + rate07
                + rate08
                + rate09
                + rate10
                + rate11
                + rate12
                + rate13
                + rate14
                + rate15
                + rate16
                + rate17
                + rate18
                + rate19
                + rate20
                + rate21
                + rate22
                + rate23)
    }
}